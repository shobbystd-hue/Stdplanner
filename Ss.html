<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOLO LEVELING: SYSTEM PLANNER</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@500;700&display=swap');
        
        :root {
            --neon-blue: #0ea5e9;
            --neon-glow: rgba(14, 165, 233, 0.6);
            --danger-red: #f43f5e;
            --bg-dark: #020617;
        }

        body {
            background-color: var(--bg-dark);
            color: white;
            font-family: 'Rajdhani', sans-serif;
            /* Subtle moving background effect */
            background-image: radial-gradient(circle at 50% 50%, #1e293b 0%, #020617 70%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }

        /* SYSTEM INTERFACE TEXT */
        .sys-font { font-family: 'Orbitron', sans-serif; letter-spacing: 2px; }
        .glow-text { text-shadow: 0 0 10px var(--neon-glow); color: var(--neon-blue); }
        .danger-text { text-shadow: 0 0 10px rgba(244, 63, 94, 0.6); color: var(--danger-red); }

        /* THE SYSTEM WINDOW BOXES */
        .sys-box {
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid var(--neon-blue);
            box-shadow: inset 0 0 20px rgba(14, 165, 233, 0.1);
            position: relative;
        }
        
        /* CORNER ACCENTS */
        .sys-box::before { content: ''; position: absolute; top: -1px; left: -1px; width: 10px; height: 10px; border-top: 2px solid var(--neon-blue); border-left: 2px solid var(--neon-blue); }
        .sys-box::after { content: ''; position: absolute; bottom: -1px; right: -1px; width: 10px; height: 10px; border-bottom: 2px solid var(--neon-blue); border-right: 2px solid var(--neon-blue); }

        /* INPUTS */
        input[type="text"] { background: transparent; border: none; border-bottom: 1px solid #334155; color: white; width: 100%; outline: none; padding: 5px; font-family: 'Rajdhani', sans-serif; text-transform: uppercase; }
        input[type="text"]:focus { border-color: var(--neon-blue); }
        
        /* CHECKBOX */
        input[type="checkbox"] {
            appearance: none; width: 20px; height: 20px; border: 1px solid var(--neon-blue); cursor: pointer; display: grid; place-content: center;
        }
        input[type="checkbox"]::before { content: ""; width: 12px; height: 12px; background: var(--neon-blue); transform: scale(0); transition: 120ms transform ease-in-out; }
        input[type="checkbox"]:checked::before { transform: scale(1); }

        /* ANIMATIONS */
        @keyframes pulse-red { 0% { box-shadow: 0 0 0 0 rgba(244, 63, 94, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(244, 63, 94, 0); } 100% { box-shadow: 0 0 0 0 rgba(244, 63, 94, 0); } }
        .penalty-flash { animation: pulse-red 0.5s; border-color: var(--danger-red); }
    </style>
</head>
<body class="p-4 max-w-md mx-auto w-full">

    <header class="mb-6 flex justify-between items-end border-b border-sky-900 pb-4">
        <div>
            <div class="text-[10px] text-slate-400 mb-1 tracking-widest">[ PLAYER STATUS ]</div>
            <h1 class="text-2xl font-bold italic sys-font glow-text">SHADOW MONARCH</h1>
            <div class="text-xs text-slate-500 mt-1">CLASS: NECROMANCER</div>
        </div>
        <div class="text-right">
            <div id="rank-badge" class="text-5xl font-black sys-font glow-text leading-none">E</div>
            <div class="text-[10px] text-slate-400 mt-1">RANKING</div>
        </div>
    </header>

    <section class="mb-8">
        <div class="flex justify-between text-xs mb-1 font-bold">
            <span class="text-sky-400">EXP / MANA</span>
            <span id="mana-display">0</span>
        </div>
        <div class="w-full bg-slate-900 h-2 border border-slate-700">
            <div id="exp-bar" class="h-full bg-sky-500 shadow-[0_0_10px_#0ea5e9]" style="width: 0%"></div>
        </div>
    </section>

    <section class="sys-box p-4 mb-6">
        <h2 class="sys-font text-xs font-bold mb-4 border-b border-slate-700 pb-2 text-sky-200">[ DAILY QUEST: PREPARATIONS ]</h2>
        
        <table class="w-full text-left border-collapse">
            <thead>
                <tr class="text-[10px] text-slate-500 uppercase tracking-widest">
                    <th class="pb-2 w-8">St</th>
                    <th class="pb-2">Mission Objective</th>
                </tr>
            </thead>
            <tbody id="quest-table" class="text-sm">
                <tr class="border-b border-slate-800/50">
                    <td class="py-3"><input type="checkbox" onchange="completeTask(this)"></td>
                    <td class="py-3"><input type="text" placeholder="ENTER QUEST 01..." oninput="saveData()"></td>
                </tr>
                <tr class="border-b border-slate-800/50">
                    <td class="py-3"><input type="checkbox" onchange="completeTask(this)"></td>
                    <td class="py-3"><input type="text" placeholder="ENTER QUEST 02..." oninput="saveData()"></td>
                </tr>
                <tr class="border-b border-slate-800/50">
                    <td class="py-3"><input type="checkbox" onchange="completeTask(this)"></td>
                    <td class="py-3"><input type="text" placeholder="ENTER QUEST 03..." oninput="saveData()"></td>
                </tr>
                <tr>
                    <td class="py-3"><input type="checkbox" onchange="completeTask(this)"></td>
                    <td class="py-3"><input type="text" placeholder="SIDE QUEST..." oninput="saveData()"></td>
                </tr>
            </tbody>
        </table>
    </section>

    <section class="sys-box p-6 text-center mb-6">
        <div class="text-[10px] uppercase tracking-[4px] text-slate-500 mb-2">Time Until Gate Break</div>
        <div id="timer" class="text-6xl font-black sys-font text-white mb-6 tracking-tighter">25:00</div>
        
        <div class="flex gap-2">
            <button onclick="startDungeon(1500)" class="flex-1 bg-sky-600 hover:bg-sky-500 text-white font-bold py-3 text-xs tracking-widest border border-sky-400 transition-all active:scale-95">
                ENTER DUNGEON
            </button>
            <button onclick="resetTimer()" class="px-4 border border-slate-600 text-slate-400 text-xs hover:text-white hover:border-white transition-all">
                RETREAT
            </button>
        </div>
    </section>

    <div class="mt-auto">
        <div class="text-[10px] text-center text-red-900 uppercase mb-2 tracking-widest">System Warning</div>
        <button onclick="triggerPenalty()" class="w-full border border-red-800 text-red-600 hover:bg-red-950/30 py-3 text-xs font-bold tracking-[2px] transition-all uppercase">
            [ FAILURE: ACCEPT PENALTY ]
        </button>
        <div id="system-msg" class="text-center text-[10px] mt-2 h-4 text-sky-500"></div>
    </div>

    <script>
        let mana = parseInt(localStorage.getItem('sl_mana')) || 0;
        let countdown;
        let isRunning = false;

        // --- CORE SYSTEM LOGIC ---

        function updateSystem() {
            // Update Text
            document.getElementById('mana-display').innerText = mana.toLocaleString() + " XP";
            
            // Calculate Rank
            const rankBadge = document.getElementById('rank-badge');
            let rank = 'E';
            let color = '#94a3b8'; // gray
            
            if (mana > 1000) { rank = 'D'; color = '#22c55e'; }
            if (mana > 3000) { rank = 'C'; color = '#0ea5e9'; }
            if (mana > 7000) { rank = 'B'; color = '#a855f7'; }
            if (mana > 15000) { rank = 'A'; color = '#f59e0b'; }
            if (mana > 30000) { rank = 'S'; color = '#f43f5e'; }

            rankBadge.innerText = rank;
            rankBadge.style.color = color;
            rankBadge.style.textShadow = `0 0 15px ${color}`;

            // Update Bar
            let percentage = (mana % 2000) / 20; // Simplified leveling math
            if(percentage > 100) percentage = 100;
            document.getElementById('exp-bar').style.width = percentage + "%";

            // Save
            localStorage.setItem('sl_mana', mana);
        }

        function completeTask(checkbox) {
            if (checkbox.checked) {
                mana += 200;
                showMessage("QUEST COMPLETE: +200 XP");
            } else {
                mana -= 200; // Undo
            }
            updateSystem();
            saveData();
        }

        function triggerPenalty() {
            mana = Math.max(0, mana - 500);
            updateSystem();
            
            // Visual Effect
            document.body.classList.add('penalty-flash');
            setTimeout(() => document.body.classList.remove('penalty-flash'), 500);
            
            showMessage("PENALTY APPLIED: -500 XP");
            alert("[SYSTEM NOTICE]: PLAYER HAS FAILED A DAILY QUEST. SURVIVAL RATE DECREASED.");
        }

        // --- TIMER LOGIC ---

        function startDungeon(seconds) {
            if(isRunning) return;
            isRunning = true;
            let timeLeft = seconds;
            
            showMessage("DUNGEON STARTED. FOCUS.");

            countdown = setInterval(() => {
                const m = Math.floor(timeLeft / 60);
                const s = timeLeft % 60;
                document.getElementById('timer').innerText = `${m}:${s < 10 ? '0' : ''}${s}`;
                
                // Gain XP simply for existing in the dungeon (Focusing)
                if (timeLeft % 60 === 0) { // Every minute
                    mana += 10;
                    updateSystem();
                }

                if (timeLeft <= 0) {
                    clearInterval(countdown);
                    isRunning = false;
                    showMessage("DUNGEON CLEARED.");
                    mana += 300; // Bonus for finishing
                    updateSystem();
                    alert("GATE CLOSED. REWARD DISTRIBUTED.");
                }
                timeLeft--;
            }, 1000);
        }

        function resetTimer() {
            clearInterval(countdown);
            isRunning = false;
            document.getElementById('timer').innerText = "25:00";
            showMessage("RETREAT SUCCESSFUL.");
        }

        // --- DATA PERSISTENCE ---

        function saveData() {
            const inputs = document.querySelectorAll('input[type="text"]');
            const data = [];
            inputs.forEach(input => data.push(input.value));
            localStorage.setItem('sl_tasks', JSON.stringify(data));
            
            const checks = document.querySelectorAll('input[type="checkbox"]');
            const checkData = [];
            checks.forEach(c => checkData.push(c.checked));
            localStorage.setItem('sl_checks', JSON.stringify(checkData));
        }

        function loadData() {
            const taskData = JSON.parse(localStorage.getItem('sl_tasks'));
            if (taskData) {
                const inputs = document.querySelectorAll('input[type="text"]');
                inputs.forEach((input, i) => { if(taskData[i]) input.value = taskData[i]; });
            }

            const checkData = JSON.parse(localStorage.getItem('sl_checks'));
            if (checkData) {
                const checks = document.querySelectorAll('input[type="checkbox"]');
                checks.forEach((c, i) => { if(checkData[i]) c.checked = checkData[i]; });
            }
        }

        function showMessage(msg) {
            const el = document.getElementById('system-msg');
            el.innerText = `> ${msg}`;
            el.style.opacity = 1;
            setTimeout(() => el.style.opacity = 0.5, 2000);
        }

        // Init
        updateSystem();
        loadData();

    </script>
</body>
</html>
